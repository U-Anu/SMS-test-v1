{% extends 'base.html' %}
{% load static %}
{% block body_block %}

<br>
<div class="row">
    <div class="main-header">
       <h4>Invoice List </h4>
    </div>
  </div>

<div class="container-fluid">
<div class="row">

<br>
<div class="col-md-12">
    <div class="card" style="padding: 10px;">
      <form action="{% url 'previous_invoice' %}" method="post">
        {% csrf_token %}
        <div class="table-responsive">
            <table id="tableID" class="display">
                <thead>
                    <tr>
                        <th>Item Name</th>
                        <th>Invoice Number</th>
                        <th>Issue Date</th>
                        <th>Due Date</th>
                        <th>Status</th>
                        <th>Payment Date</th>
                        <th>Total Amount</th>
                        <th>Action</th>
                    </tr>
                </thead>


                <tbody>
                    {% for data in invoice_all %}
                    
                    <tr>
                    
                    <td>
                      {% for expense_item in data.expense.all %}
                          {{ expense_item.item_name }} 
                          {% if not forloop.last %}, {% endif %} 
                      {% empty %}
                          No expenses
                      {% endfor %}
                     </td>
                        <td>{{ data.invoice_number }}</td>
                        <td>{{ data.issue_date }}</td>  
                        <td>{{ data.due_date }}</td>
                        <td>{{ data.status }}</td>
                        <td>{{ data.payment_date }}</td>
                        <td>{{ data.total_amount }}</td>
                    
                        <td>
                            <a href="{% url 'view_invoice' data.id %}"
                            <button class="btn btn-primary" style="float: right;">View Invoice</button>
                        </a>

                        </td>
                        
 
                    </tr>
                
                    {% endfor %}



                </tbody>
                

            </table>
            <br>

        </div>
        </form>
    </div>
</div>
</div>
</div>


<!-- modal End -->

{% endblock %}
{% block script_block %}

{% endblock %}