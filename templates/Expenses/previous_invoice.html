{% extends 'base.html' %}
{% load static %}
<style>
  body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      margin: 0;
      padding: 0;
  }
  .invoice-container {
      max-width: 800px;
      margin: 20px auto;
      background: white;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }
  .header {
      background-color: #007b8f;
      color: white;
      padding: 20px;
      text-align: center;
  }
  .header h1 {
      margin: 0;
  }
  .details {
      display: flex;
      justify-content: space-between;
      margin: 20px 0;
  }
  .bill-to {
      width: 40%; /* Adjust the width for the left side */
  }
  .invoice-details {
      width: 55%;
  }
  .total {
      display: flex;
      justify-content: flex-end;
      margin: 20px 0;
  }
  .notes {
      margin: 20px 0;
      font-size: 0.9em;
      color: #555;
  }
  .footer {
      text-align: center;
      margin: 20px 0;
      font-size: 0.9em;
      color: #777;
  }

  /* Style for disabling the left side */
  .disabled {
      pointer-events: none; /* Disable interaction */
      opacity: 0.5; /* Make the left side appear disabled */
  }

  /* Optional: Hide the print button during printing */
  @media print {
      .print-button-container {
          display: none;
      }
  }
</style>

{% block body_block %}
<br>
<div class="invoice-container">
   
    <div class="header">
        {% for data in records %}
        <h1 style="color: white; margin: 0; font-weight: bold; text-align: left;">Previous Invoice</h1>
        <div style="display: flex; align-items: center; justify-content: space-between; padding: 10px;">
            <!-- Left Column: Logo -->
            <div style="flex: 1; display: flex; justify-content: flex-start; align-items: center;">
                <div style="padding: 1px;">
                    <img src="{% if data.edit_admin_logo %}{{ data.edit_admin_logo.url }}{% endif %}" 
                         alt="Logo" 
                         style="height: 100px; width: auto;" 
                         loading="lazy">
                </div>
            </div>
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
             &nbsp; &nbsp; &nbsp; &nbsp; 
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;

            <!-- Right Column: School Details -->
            <div style="flex: 2; padding: 5px; text-align: left; display: flex; flex-direction: column;">
                <div style="margin-bottom: 5px;"><strong>School Name:</strong> {{ data.school_name }}</div>
                <div style="margin-bottom: 5px;"><strong>School Code:</strong> {{ data.school_code }}</div>
                <div style="margin-bottom: 5px;"><strong>Address:</strong> {{ data.address }}</div>
                <div style="margin-bottom: 5px;"><strong>Phone:</strong> {{ data.phone }}</div>
                <div style="margin-bottom: 5px;"><strong>Email:</strong> {{ data.email }}</div>
            </div>
        </div>
        {% endfor %}
    </div>
    
    <form action="{% url 'create_invoice' %}" method="post">
      {% csrf_token %}
    <div class="details">
        <div class="bill-to">
          <strong>Date:</strong> <input type="date" class="form-control" name="due_date" id="due_date">
            <!-- <strong>Bill To:</strong><br> -->
            {{ customer.name }}<br>
            {{ customer.address }}<br>
            {{ customer.city }}<br>
            {{ customer.country }}<br>
            {{ customer.postal }}<br>
        </div>
        <div class="invoice-details">
            <!-- <strong>Invoice #:</strong> {{ invoice.number }}<br> -->
           
            <strong>Pending made on:</strong> 
            <input type="date" class="form-control" name="issue_date" id="due_date" required>
            <br>
        </div>
    </div>

    <table>
        <thead>
            <tr>
        
                <th>Items Type</th>
                <th>Items</th>
                <th>Description</th>
                <th>Quantity</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for item in expense %}
            <tr>
                <td>{{ item.category.name }}</td>
                <td>{{ item.item_name }}</td>
                <td>{{ item.description }}</td>
                <td>{{ item.quantity }}</td>
                <td>{{ item.amount }}
                  <input type="hidden" name="expense_get_all" value="{{item.id}}">
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="total">
        <strong>Total: {{ total_amount_expense }}</strong>
    </div>

    <div class="notes">
        Notes: {{ notes }}
    </div>

    <div class="footer">
        {% for data in records %}
        Â©  {{ data.school_name }}. All rights reserved.
        {% endfor %}
    </div>
    <div class="print-button-container" style="text-align: right; margin: 20px 0;">
      <button onclick="printInvoice()" class="btn btn-primary">Print Invoice</button>
      &nbsp;
      <button type="submit" class="btn btn-primary" style="float: right;">Save</button>
  </div>
  
  </form>
</div>

<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f5f5f5;
        margin: 0;
        padding: 0;
    }
    .invoice-container {
        max-width: 800px;
        margin: 20px auto;
        background: white;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .header {
        background-color: #007b8f;
        color: white;
        padding: 50px;
        text-align: center;
    }
    .header h1 {
        margin: 0;
    }
    .details {
        display: flex;
        justify-content: space-between;
        margin: 20px 0;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
    }
    table th, table td {
        border: 1px solid #ddd;
        padding: 10px;
        text-align: left;
    }
    table th {
        background-color: #f2f2f2;
    }
    .total {
        display: flex;
        justify-content: flex-end;
        margin: 20px 0;
    }
    .notes {
        margin: 20px 0;
        font-size: 0.9em;
        color: #555;
    }
    .footer {
        text-align: center;
        margin: 20px 0;
        font-size: 0.9em;
        color: #777;
    }
</style>

<script>
  // Get the current date
  const today = new Date();
  // Format the date to YYYY-MM-DD
  const formattedDate = today.toISOString().split('T')[0];
  // Set the value of the date input field
  document.getElementById('due_date').value = formattedDate;

  // Print Invoice function
  function printInvoice() {
      window.print();
  }
</script>
{% endblock %}