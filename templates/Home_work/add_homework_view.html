{% extends 'base.html' %}
{% load static %}

{% block body_block %}

<div class="row">
  <div class="main-header">
    <h4>Homework List</h4>
  </div>
</div>

<div class="card p-3">
  <div class="table-responsive">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Class</th>
          <th>Section</th>
          <th>Subject</th>
          <th>Homework Date</th>
          <th>Submission Date</th>
          <th>Evaluation Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for data in records %}
        <tr>
          <td>{{ data.Class }}</td>
          <td>{{ data.section }}</td>
          <td>{{ data.subject }}</td>
          <td>{{ data.homework_date }}</td>
          <td>{{ data.submission_date }}</td>
          <td>{{ data.evaluation_date|default:"-" }}</td>
          <td>
            <a href="{% url 'add_homework_view' data.id %}">
              <i class="fa fa-eye"></i>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- ================= MODAL ================= -->

<div class="modal fade" id="myModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Evaluate Homework</h5>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <div class="modal-body">
        <form method="post">
          {% csrf_token %}

          <div class="row">

            <!-- STUDENT LIST -->
            <div class="col-md-6 bg-light">
              <ul class="list-unstyled">
                {% for data in recordss %}
                <li class="bg-white p-2 mb-2">

                 <div class="d-flex justify-content-between align-items-center">

                     &nbsp;  &nbsp;  &nbsp; <div class="form-check">
                        <input class="form-check-input"
                              type="checkbox"
                              name="student_ids"
                              value="{{ data.id }}"
                              {% if data.status == "Submitted" %}checked{% endif %}>
                        <label class="form-check-label">
                          {{ data.student.first_name }}
                        </label>
                      </div>
  &nbsp;  &nbsp;  &nbsp;
                    {% if  data.document %}
                      <a href="{{ data.document.url }}" target="_blank">
                        ðŸ“Ž View
                      </a>
                    {% else %}
                      <span class="text-muted">No File</span>
                    {% endif %}

                  </div>
                </li>
                {% endfor %}
              </ul>
            </div>

            <!-- SUMMARY -->
            <div class="col-md-6 bg-secondary text-white p-3">
              <h5>Summary</h5>
              <hr>
              <p><strong>Class:</strong> {{ record.Class }}</p>
              <p><strong>Section:</strong> {{ record.section }}</p>
              <p><strong>Subject:</strong> {{ record.subject }}</p>
              <p><strong>Homework Date:</strong> {{ record.homework_date }}</p>
              <p><strong>Submission Date:</strong> {{ record.submission_date }}</p>
              <p><strong>Evaluation Date:</strong> {{ record.evaluation_date|default:"-" }}</p>
              <p><strong>Description:</strong> {{ record.description }}</p>
            </div>

          </div>

          <div class="row mt-3">
            <div class="col-md-6">
              <label>Evaluation Date</label>
              <input type="date"
                     class="form-control"
                     name="evaluation_date"
                     value="{{ record.evaluation_date|date:'Y-m-d' }}"
                     required>
            </div>
          </div>

          <div class="mt-4 text-right">
            <button type="submit"
                    name="save"
                    value="save"
                    class="btn btn-success">
              Save Evaluation
            </button>
          </div>

        </form>
      </div>

    </div>
  </div>
</div>

{% endblock %}

{% block script_block %}
{% if view %}
<script>
  $(document).ready(function () {
    $('#myModal').modal('show');
  });
</script>
{% endif %}
{% endblock %}
